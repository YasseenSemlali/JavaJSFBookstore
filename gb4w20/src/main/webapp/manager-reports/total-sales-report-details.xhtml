<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
Java Server Faces page that displays the publisher report. 
This will display the total sales of the publisher along with the totals of each item sold. 
The user can select which author they would like to view via a drop down. 

@author Jeffrey Boisvert
-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="/templates/defaultTemplate.xhtml">
    <ui:define name="head">
        <title>#{msgs.totalSalesReport}</title>
    </ui:define>
    <ui:define name="content">
    <h:outputStylesheet library="css" name="report.css" />
    <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
             <li class="breadcrumb-item"><a href="../manager-frontpage.xhtml">#{msgs.dashboard}</a></li>
             <li class="breadcrumb-item"><a href="../reports-page.xhtml">#{msgs.reportsLower}</a></li>
             <li class="breadcrumb-item active" aria-current="page">#{msgs.totalSalesReport}</li>
          </ol>
    </nav>
        <h:panelGroup layout="block" class="jumbotron">
        <h1 class="report-title">#{msgs.totalSalesReport}</h1>
        <h:outputText class="report-title">#{msgs.totalSalesReport}</h:outputText>
        <h:form class="report-form" >
            <h:panelGroup layout="block">
                    <h:outputLabel for="startDateReport" value="#{msgs.startDate}"/>
                    <p:calendar class="datepicker" value="#{totalSalesReportBackingBean.startDate}"
                        id="startDateReport" pattern="yyyy-MM-dd" mode="popup" showOn="button">
                    </p:calendar>
            </h:panelGroup>
            <div>
                    <h:outputLabel for="endDateReport" value="#{msgs.endDate}"/>
                    <p:calendar class="datepicker" value="#{totalSalesReportBackingBean.endDate}"
                        id="endDateReport" pattern="yyyy-MM-dd" mode="popup" showOn="button">
                    </p:calendar>
            </div>
            <h:commandButton class="btn btn-primary run-report-button" value="#{msgs.runReport}"
                             action="#{totalSalesReportBackingBean.runReport}"/>

        </h:form>
        </h:panelGroup>
        <!-- Report --> 
        <div class="jumbotron">
             <h4 class="report-sub-title">#{msgs.totalSalesLabel} $#{totalSalesReportBackingBean.totalSales == null ? 0.00 : totalSalesReportBackingBean.totalSales}</h4>
        </div>
        <div class="jumbotron">
              <h3 class="report-sub-title">#{msgs.itemsPurchased}</h3>
              <h:panelGroup class="report-result" layout="block">
              <h:panelGrid class="table table-hover" columns="2" border="1" rendered="#{not empty totalSalesReportBackingBean.purchasedProducts}">
              <h:panelGroup class="column-header">#{msgs.bookColumnName}</h:panelGroup>
                  <h:panelGroup class="column-header">#{msgs.saleTotal}</h:panelGroup>
                        <c:forEach items="#{totalSalesReportBackingBean.purchasedProducts}" var="sales">
                            <h:panelGroup>#{sales.name}</h:panelGroup>
                            <h:panelGroup>$#{sales.amount}</h:panelGroup>
                        </c:forEach>
             </h:panelGrid>
             </h:panelGroup>
        </div>
    </ui:define>
</ui:composition>
